"use strict";(self.webpackChunkr1_tv=self.webpackChunkr1_tv||[]).push([[690],{690:(e,t,n)=>{function o(){if(console.log("Initializing R1 Creation Triggers web polyfills..."),window.PluginMessageHandler||(window.PluginMessageHandler={postMessage:e=>{console.log("[Web Polyfill] PluginMessageHandler.postMessage:",e);try{const t=JSON.parse(e);t.useLLM&&setTimeout(()=>{const e={message:t.message,pluginId:"web-r1-tv",data:JSON.stringify({response:"Web polyfill response for: ".concat(t.message),timestamp:(new Date).toISOString(),webMode:!0})};window.onPluginMessage&&window.onPluginMessage(e)},1e3)}catch(t){console.warn("[Web Polyfill] Invalid JSON in plugin message:",t)}}}),window.closeWebView||(window.closeWebView={postMessage:e=>{console.log("[Web Polyfill] closeWebView.postMessage:",e),window.confirm("Close R1 TV app?")&&(window.close()||(window.location.href="about:blank"))}}),window.TouchEventHandler||(window.TouchEventHandler={postMessage:e=>{console.log("[Web Polyfill] TouchEventHandler.postMessage:",e);try{const t=JSON.parse(e),n=document.elementFromPoint(t.x,t.y);if(n)switch(t.type){case"tap":n.click();break;case"down":n.dispatchEvent(new TouchEvent("touchstart",{touches:[{clientX:t.x,clientY:t.y}]}));break;case"up":n.dispatchEvent(new TouchEvent("touchend"));break;case"move":n.dispatchEvent(new TouchEvent("touchmove",{touches:[{clientX:t.x,clientY:t.y}]}))}}catch(t){console.warn("[Web Polyfill] TouchEventHandler error:",t)}}}),window.creationStorage||(window.creationStorage={plain:{setItem:async(e,t)=>{try{localStorage.setItem("r1tv_plain_".concat(e),t)}catch(n){console.warn("[Web Polyfill] Plain storage setItem error:",n)}},getItem:async e=>{try{return localStorage.getItem("r1tv_plain_".concat(e))}catch(t){return console.warn("[Web Polyfill] Plain storage getItem error:",t),null}},removeItem:async e=>{try{localStorage.removeItem("r1tv_plain_".concat(e))}catch(t){console.warn("[Web Polyfill] Plain storage removeItem error:",t)}},clear:async()=>{try{Object.keys(localStorage).filter(e=>e.startsWith("r1tv_plain_")).forEach(e=>localStorage.removeItem(e))}catch(e){console.warn("[Web Polyfill] Plain storage clear error:",e)}}},secure:{setItem:async(e,t)=>{try{sessionStorage.setItem("r1tv_secure_".concat(e),t)}catch(n){console.warn("[Web Polyfill] Secure storage setItem error:",n)}},getItem:async e=>{try{return sessionStorage.getItem("r1tv_secure_".concat(e))}catch(t){return console.warn("[Web Polyfill] Secure storage getItem error:",t),null}},removeItem:async e=>{try{sessionStorage.removeItem("r1tv_secure_".concat(e))}catch(t){console.warn("[Web Polyfill] Secure storage removeItem error:",t)}},clear:async()=>{try{Object.keys(sessionStorage).filter(e=>e.startsWith("r1tv_secure_")).forEach(e=>sessionStorage.removeItem(e))}catch(e){console.warn("[Web Polyfill] Secure storage clear error:",e)}}}}),!window.creationSensors){let e=null,t=null;window.creationSensors={accelerometer:{isAvailable:async()=>"DeviceMotionEvent"in window,start:function(n){e=n;const o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).frequency||60;if("DeviceMotionEvent"in window){const t=t=>{if(e&&t.accelerationIncludingGravity){const{x:n,y:o,z:r}=t.accelerationIncludingGravity;e({x:Math.max(-1,Math.min(1,(n||0)/9.8)),y:Math.max(-1,Math.min(1,(o||0)/9.8)),z:Math.max(-1,Math.min(1,(r||0)/9.8))})}};window.addEventListener("devicemotion",t),window.creationSensors.accelerometer._cleanup=()=>{window.removeEventListener("devicemotion",t)}}else t=setInterval(()=>{e&&e({x:.1*(Math.random()-.5),y:.1*(Math.random()-.5),z:.98+.04*(Math.random()-.5)})},1e3/o)},stop:()=>{e=null,t&&(clearInterval(t),t=null),window.creationSensors.accelerometer._cleanup&&(window.creationSensors.accelerometer._cleanup(),delete window.creationSensors.accelerometer._cleanup)}}}}!function(){let e=null;document.addEventListener("keydown",t=>{"Space"!==t.code||t.repeat||(t.preventDefault(),e=setTimeout(()=>{const e=new CustomEvent("longPressStart");window.dispatchEvent(e)},500))}),document.addEventListener("keyup",t=>{if("Space"===t.code)if(t.preventDefault(),e){clearTimeout(e),e=null;const t=new CustomEvent("sideClick");window.dispatchEvent(t)}else{const e=new CustomEvent("longPressEnd");window.dispatchEvent(e)}}),document.addEventListener("wheel",e=>{if(e.preventDefault(),e.deltaY<0){const e=new CustomEvent("scrollUp");window.dispatchEvent(e)}else if(e.deltaY>0){const e=new CustomEvent("scrollDown");window.dispatchEvent(e)}}),document.addEventListener("keydown",e=>{if("ArrowUp"===e.code){e.preventDefault();const t=new CustomEvent("scrollUp");window.dispatchEvent(t)}else if("ArrowDown"===e.code){e.preventDefault();const t=new CustomEvent("scrollDown");window.dispatchEvent(t)}}),console.log("Hardware button polyfills initialized (Space=PTT, Wheel/Arrows=Scroll)")}(),console.log("R1 Creation Triggers web polyfills initialized successfully!")}function r(){return!!(window.PluginMessageHandler&&window.closeWebView&&window.creationStorage&&window.creationSensors)}function s(){return{isR1:r(),isWeb:!r(),userAgent:navigator.userAgent,platform:navigator.platform,screenSize:{width:window.screen.width,height:window.screen.height},viewportSize:{width:window.innerWidth,height:window.innerHeight}}}n.r(t),n.d(t,{getPlatformInfo:()=>s,initializeWebR1Polyfills:()=>o,isR1Environment:()=>r})}}]);
//# sourceMappingURL=690.64c8eed6.chunk.js.map