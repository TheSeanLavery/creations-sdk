(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();class p{constructor(){this.sideButtonEnabled=!0,this.scrollWheelEnabled=!0,this.eventListeners=new Map}init(e={}){this.sideButtonEnabled=e.sideButtonEnabled??!0,this.scrollWheelEnabled=e.scrollWheelEnabled??!0,this.sideButtonEnabled&&this.setupSideButtonListener(),this.scrollWheelEnabled&&this.setupScrollWheelListener(),e.keyboardFallback!==!1&&this.setupKeyboardFallback()}setupSideButtonListener(){window.addEventListener("sideClick",e=>{this.sideButtonEnabled&&this.handleSideButtonClick(e)})}setupScrollWheelListener(){window.addEventListener("scrollUp",e=>{this.scrollWheelEnabled&&this.handleScrollWheel({direction:"up",event:e})}),window.addEventListener("scrollDown",e=>{this.scrollWheelEnabled&&this.handleScrollWheel({direction:"down",event:e})})}setupKeyboardFallback(){window.addEventListener("keydown",e=>{if(e.code==="Space"){e.preventDefault();const i=new CustomEvent("sideClick",{detail:{source:"keyboard"}});window.dispatchEvent(i)}})}handleSideButtonClick(e){(this.eventListeners.get("sideButton")||[]).forEach(s=>s(e))}handleScrollWheel(e){(this.eventListeners.get("scrollWheel")||[]).forEach(s=>s({direction:e.direction,event:e.event}))}on(e,i){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(i)}off(e,i){const s=this.eventListeners.get(e)||[],n=s.indexOf(i);n>-1&&s.splice(n,1)}}const g=new p;class E{constructor(){this.screenWidth=240}setupViewport(){let e=document.querySelector('meta[name="viewport"]');e||(e=document.createElement("meta"),e.name="viewport",document.head.appendChild(e)),e.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}}const w=new E;w.setupViewport();g.init();const f=document.getElementById("status"),u=document.getElementById("email"),h=document.getElementById("go"),l=document.getElementById("art"),r=l.getContext("2d");function c(t){f&&(f.textContent=t)}function m(){const t=window.devicePixelRatio||1,e=220,i=220;l.style.width=e+"px",l.style.height=i+"px",l.width=Math.floor(e*t),l.height=Math.floor(i*t),r.setTransform(t,0,0,t,0,0)}m();window.addEventListener("resize",m);const y=["ğŸ˜€","ğŸ˜","ğŸ¤–","âœ¨","ğŸ”¥","ğŸŒˆ","ğŸ‰","ğŸš€","ğŸ§ ","ğŸª„","ğŸ’¡","â­","ğŸ€","ğŸŒ¸","ğŸˆ","ğŸ’","âš¡","ğŸ®","ğŸ›°ï¸","ğŸ§©"];function d(t,e){return Math.random()*(e-t)+t}function v(t){return t[Math.random()*t.length|0]}function b(){const t=l.clientWidth,e=l.clientHeight;r.clearRect(0,0,t,e),r.fillStyle="#000",r.fillRect(0,0,t,e);for(let i=0;i<1e3;i++){const s=v(y),n=d(8,24);r.font=`${n}px system-ui, Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji`,r.globalAlpha=d(.6,1);const o=d(-8,t+8),a=d(8,e+8);r.fillText(s,o,a)}r.globalAlpha=1}function L(t,e){const s={useLLM:!0,message:`You are an assistant. Please email the attached image to the recipient. Return ONLY valid JSON in this exact format: {"action":"email","to":"${t}","subject":"Emoji Art","body":"Here is your procedurally generated emoji art.","attachments":[{"dataUrl":"<dataurl>"}]}`,imageDataUrl:e};typeof PluginMessageHandler<"u"?(PluginMessageHandler.postMessage(JSON.stringify(s)),c("Sent to AI...")):(c("Plugin API not available"),console.log("Payload:",s))}h==null||h.addEventListener("click",()=>{const t=((u==null?void 0:u.value)||"").trim();if(!t){c("Enter an email");return}c("Generating..."),b();const e=l.toDataURL("image/jpeg",.7);c("Preparing email..."),L(t,e)});console.log("AI Demo Ready!");
