(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();console.log(typeof PluginMessageHandler<"u"?"Running as R1 Creation":"Running in browser mode");let e={isPlaying:!1,isPaused:!1,score:0,highestY:0,screenScrollY:0,platformSpeed:1,gameStarted:!1,musicMuted:!1,sfxMuted:!1,highScore:0,isNewHighScore:!1},t={x:120,y:200,radius:8,velocityX:0,velocityY:0,onGround:!0,color:"#FE5F00"},a=[],g,r,h=null,d=null,S=!1,m=null,B=!1;const O=.1,p=.8,E=6,Y=.85,P=.98,v=60,C=8,M=260,u=240,L=254,w=100,X=-.1;function x(i){return{x:Math.random()*(u-v),y:i,width:v,height:C,color:"#fff"}}function b(){a=[],a.push({x:0,y:M,width:u,height:C,color:"#fff",isGround:!0});const i=M-60;h={x:Math.floor((u-v)/2),y:i,width:v,height:C,color:"#fff",isStart:!0},a.push(h);for(let s=1;s<=20;s++)a.push(x(i-s*80))}function H(){if(!e.isPlaying||e.isPaused)return;if(t.velocityY+=O,t.x+=t.velocityX,t.y+=t.velocityY,t.x-t.radius<0?(t.x=t.radius,t.velocityX=0):t.x+t.radius>u&&(t.x=u-t.radius,t.velocityX=0),t.velocityX*=t.onGround?Y:P,Math.abs(t.velocityX)<.01&&(t.velocityX=0),t.y<M-50&&!e.gameStarted&&(e.gameStarted=!0),e.gameStarted){const s=t.y-e.screenScrollY;if(s<w){const o=w-s;e.screenScrollY+=o*X}}const i=Math.max(0,M-t.y);for(i>e.highestY&&(e.highestY=i,e.score=Math.floor(e.highestY/10)),e.platformSpeed=.2+e.score*.01,a.forEach(s=>{s.y+=e.platformSpeed}),a=a.filter(s=>s.y<e.screenScrollY+L+100);a.length<25;){const s=Math.min(...a.map(o=>o.y));a.push(x(s-80))}t.y>e.screenScrollY+L+50&&F()}function D(){!e.isPlaying||e.isPaused||(t.onGround=!1,a.forEach(i=>{t.x+t.radius>i.x&&t.x-t.radius<i.x+i.width&&t.y+t.radius>i.y&&t.y-t.radius<i.y+i.height&&t.velocityY>0&&t.y<i.y&&(t.y=i.y-t.radius,t.velocityY=-6.5,t.onGround=!0,i.color="#FE5F00",setTimeout(()=>{i.color="#fff"},100))}))}function U(){r.fillStyle="#000",r.fillRect(0,0,u,L),r.save(),r.translate(0,-e.screenScrollY),a.forEach(o=>{r.fillStyle=o.color,r.fillRect(o.x,o.y,o.width,o.height)});const i=t.radius*2;if(B&&m){const o=Math.round(t.x-t.radius),l=Math.round(t.y-t.radius);r.imageSmoothingEnabled=!0,r.drawImage(m,o,l,i,i)}else r.fillStyle=t.color,r.beginPath(),r.arc(t.x,t.y,t.radius,0,Math.PI*2),r.fill();r.restore(),document.getElementById("score").textContent=`Score: ${e.score}`;const s=document.getElementById("highScore");s&&(s.textContent=`Top: ${e.highScore}`)}function I(){H(),D(),U(),e.isPlaying&&requestAnimationFrame(I)}function A(){e.isPlaying=!0,e.score=0,e.highestY=0,e.screenScrollY=0,e.platformSpeed=1,e.gameStarted=!1,e.isNewHighScore=!1;const i=document.getElementById("newHighScoreBanner");i&&i.classList.add("hidden"),b(),t.velocityX=0,t.velocityY=0,t.onGround=!0,h?(t.x=h.x+h.width/2,t.y=h.y-t.radius):(t.x=120,t.y=200),document.getElementById("gameOver").classList.add("hidden"),I()}function F(){e.isPlaying=!1,document.getElementById("finalScore").textContent=e.score,document.getElementById("gameOver").classList.remove("hidden");const i=e.highScore;if(e.score>i){e.highScore=e.score,e.isNewHighScore=!0;try{localStorage.setItem("bbg_highScore",String(e.highScore))}catch{}}const s=document.getElementById("highScore");if(s&&(s.textContent=`Top: ${e.highScore}`),e.isNewHighScore){const o=document.getElementById("finalScore");o&&o.classList.add("flash-gold"),s&&s.classList.add("flash-gold");const l=document.getElementById("newHighScoreBanner");l&&l.classList.remove("hidden"),setTimeout(()=>{o&&o.classList.remove("flash-gold"),s&&s.classList.remove("flash-gold"),l&&l.classList.add("hidden")},4e3)}g.style.filter="brightness(1.5)",setTimeout(()=>{g.style.filter="brightness(1)"},200)}window.addEventListener("scrollUp",()=>{e.isPlaying&&(t.velocityX=Math.max(t.velocityX-p,-E))});window.addEventListener("scrollDown",()=>{e.isPlaying&&(t.velocityX=Math.min(t.velocityX+p,E))});window.addEventListener("sideClick",()=>{e.isPlaying||A(),y()});document.addEventListener("keydown",i=>{if(typeof PluginMessageHandler>"u")switch(i.key){case" ":i.preventDefault(),e.isPlaying||A(),y();break;case"ArrowLeft":e.isPlaying&&(t.velocityX=Math.max(t.velocityX-p,-E));break;case"ArrowRight":e.isPlaying&&(t.velocityX=Math.min(t.velocityX+p,E));break}});document.addEventListener("DOMContentLoaded",()=>{console.log("Bouncing Ball Game initialized!"),g=document.getElementById("gameCanvas"),r=g.getContext("2d"),g.width=u,g.height=L;try{const n=new URL("data:image/png;base64,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",import.meta.url).href;m=new Image,m.src=n,m.onload=()=>{B=!0}}catch(n){console.warn("Failed to load ball sprite",n)}const i=document.getElementById("settingsButton"),s=document.getElementById("settingsMenu"),o=document.getElementById("musicMuteToggle"),l=document.getElementById("sfxMuteToggle");i&&s&&(i.addEventListener("click",n=>{n.stopPropagation(),s.classList.toggle("hidden"),!s.classList.contains("hidden")?e.isPlaying&&(e.isPaused=!0):e.isPaused&&(e.isPaused=!1)}),document.addEventListener("click",n=>{s.classList.contains("hidden")||!s.contains(n.target)&&n.target!==i&&(s.classList.add("hidden"),e.isPaused&&(e.isPaused=!1))}));try{const n=localStorage.getItem("bbg_musicMuted"),c=localStorage.getItem("bbg_sfxMuted");n!==null&&(e.musicMuted=n==="true"),c!==null&&(e.sfxMuted=c==="true");const f=localStorage.getItem("bbg_highScore");f!==null&&(e.highScore=parseInt(f,10)||0)}catch{}o&&(o.checked=e.musicMuted,o.addEventListener("change",()=>{e.musicMuted=o.checked,R(),K()})),l&&(l.checked=e.sfxMuted,l.addEventListener("change",()=>{e.sfxMuted=l.checked,R()})),G(),typeof PluginMessageHandler>"u"&&(window.addEventListener("keydown",n=>{n.code==="Space"&&(n.preventDefault(),window.dispatchEvent(new CustomEvent("sideClick")))}),["pointerdown","touchstart","click"].forEach(n=>{window.addEventListener(n,y,{once:!0})})),A(),y()});console.log("Bouncing Ball Game Ready!");console.log("Controls:");console.log("- Scroll wheel: Move ball left/right");console.log("- Side button: Restart game");function G(){if(!d)try{const i=new URL(""+new URL("banger1-D-KldX_V.mp3",import.meta.url).href,import.meta.url).href;d=new Audio(i),d.loop=!0,d.volume=.4,d.muted=!!e.musicMuted}catch(i){console.warn("Failed to initialize background music",i)}}function y(){if(d||G(),!d||S||(S=!0,e.musicMuted))return;const i=d.play();i&&typeof i.then=="function"&&i.catch(()=>{S=!1})}function K(){d&&(d.muted=!!e.musicMuted,e.musicMuted?d.pause():(S=!1,y()))}function R(){try{localStorage.setItem("bbg_musicMuted",String(!!e.musicMuted)),localStorage.setItem("bbg_sfxMuted",String(!!e.sfxMuted))}catch{}}
