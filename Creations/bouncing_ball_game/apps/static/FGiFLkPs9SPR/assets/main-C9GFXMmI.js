(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();console.log(typeof PluginMessageHandler<"u"?"Running as R1 Creation":"Running in browser mode");let e={isPlaying:!1,isPaused:!1,score:0,highestY:0,screenScrollY:0,platformSpeed:1,gameStarted:!1,musicMuted:!1,sfxMuted:!1,highScore:0,isNewHighScore:!1},t={x:120,y:200,radius:8,velocityX:0,velocityY:0,onGround:!0,color:"#FE5F00"},u=[],g,a,h=null,d=null,Y=!1,v=null,F=!1,b=0,H=0,D=0;const T=.1,A=.8,L=6,Z=.85,N=.98,y=60,C=8,m=260,f=240,B=254,W=100,O=32,I=80,G=1e3/60;let M=0,E=0,R=!1;function p(o,n,r){return o+(n-o)*r}function J(){R||(R=!0,E=performance.now(),M=0,setTimeout(U,0))}function U(){if(!R)return;const o=performance.now();let n=o-E;for(n>100&&(n=100),E=o,M+=n;M>=G;)z(),q(),M-=G;Q(),e.isPlaying?setTimeout(U,0):R=!1}function k(o){return{x:Math.random()*(f-y),y:o,prevY:o,width:y,height:C,color:"#fff"}}function V(){u=new Array(O),u[0]={x:0,y:m,prevY:m,width:f,height:C,color:"#fff",isGround:!0};const o=m-60;h={x:Math.floor((f-y)/2),y:o,prevY:o,width:y,height:C,color:"#fff",isStart:!0},u[1]=h;for(let n=2;n<O;n++)u[n]=k(o-(n-1)*I)}function z(){if(!e.isPlaying||e.isPaused)return;if(t.velocityY+=T,b=t.x,H=t.y,t.x+=t.velocityX,t.y+=t.velocityY,t.x-t.radius<0?(t.x=t.radius,t.velocityX=0):t.x+t.radius>f&&(t.x=f-t.radius,t.velocityX=0),t.velocityX*=t.onGround?Z:N,Math.abs(t.velocityX)<.01&&(t.velocityX=0),t.y<m-50&&!e.gameStarted&&(e.gameStarted=!0),e.gameStarted){const s=t.y-W,i=t.velocityY<0,l=.12,c=Math.min(.25,Math.max(0,-t.velocityY)*.02),S=Math.min(.45,l+(i?c:0));D=e.screenScrollY;let x=p(e.screenScrollY,s,S);x>e.screenScrollY&&(x=e.screenScrollY),e.screenScrollY=x}const o=Math.max(0,m-t.y);o>e.highestY&&(e.highestY=o,e.score=Math.floor(e.highestY/10)),e.platformSpeed=.2+e.score*.01;let n=1/0;for(let s=0;s<u.length;s++){const i=u[s];i.prevY=i.y,i.y+=e.platformSpeed,i.isGround||i.y<n&&(n=i.y)}const r=e.screenScrollY+B+100;n===1/0&&(n=m-I);for(let s=0;s<u.length;s++){const i=u[s];if(!i.isGround&&i.y>=r){const l=n-I;n=l,i.x=Math.random()*(f-y),i.y=l,i.prevY=l,i.width=y,i.height=C,i.color="#fff",i.isStart=!1}}t.y>e.screenScrollY+B+50&&j()}function q(){!e.isPlaying||e.isPaused||(t.onGround=!1,u.forEach(o=>{t.x+t.radius>o.x&&t.x-t.radius<o.x+o.width&&t.y+t.radius>o.y&&t.y-t.radius<o.y+o.height&&t.velocityY>0&&t.y<o.y&&(t.y=o.y-t.radius,t.velocityY=-6.5,t.onGround=!0,o.color="#FE5F00",setTimeout(()=>{o.color="#fff"},100))}))}function Q(){a.fillStyle="#000",a.fillRect(0,0,f,B),a.save();const o=Math.min(1,M/G),n=p(D,e.screenScrollY,o||0);a.translate(0,-n),u.forEach(c=>{const S=p(c.prevY,c.y,o||0);a.fillStyle=c.color,a.fillRect(c.x,S,c.width,c.height)});const r=t.radius*2,s=p(b,t.x,o||0),i=p(H,t.y,o||0);if(F&&v){const c=Math.round(s-t.radius),S=Math.round(i-t.radius);a.imageSmoothingEnabled=!0,a.drawImage(v,c,S,r,r)}else a.fillStyle=t.color,a.beginPath(),a.arc(s,i,t.radius,0,Math.PI*2),a.fill();a.restore(),document.getElementById("score").textContent=`Score: ${e.score}`;const l=document.getElementById("highScore");l&&(l.textContent=`Top: ${e.highScore}`)}function X(){e.isPlaying=!0,e.score=0,e.highestY=0,e.screenScrollY=0,e.platformSpeed=1,e.gameStarted=!1,e.isNewHighScore=!1;const o=document.getElementById("newHighScoreBanner");o&&o.classList.add("hidden"),V(),t.velocityX=0,t.velocityY=0,t.onGround=!0,h?(t.x=h.x+h.width/2,t.y=h.y-t.radius):(t.x=120,t.y=200),document.getElementById("gameOver").classList.add("hidden"),J()}function j(){e.isPlaying=!1,document.getElementById("finalScore").textContent=e.score,document.getElementById("gameOver").classList.remove("hidden");const o=e.highScore;if(e.score>o){e.highScore=e.score,e.isNewHighScore=!0;try{localStorage.setItem("bbg_highScore",String(e.highScore))}catch{}}const n=document.getElementById("highScore");if(n&&(n.textContent=`Top: ${e.highScore}`),e.isNewHighScore){const r=document.getElementById("finalScore");r&&r.classList.add("flash-gold"),n&&n.classList.add("flash-gold");const s=document.getElementById("newHighScoreBanner");s&&s.classList.remove("hidden"),setTimeout(()=>{r&&r.classList.remove("flash-gold"),n&&n.classList.remove("flash-gold"),s&&s.classList.add("hidden")},4e3)}g.style.filter="brightness(1.5)",setTimeout(()=>{g.style.filter="brightness(1)"},200)}window.addEventListener("scrollUp",()=>{e.isPlaying&&(t.velocityX=Math.max(t.velocityX-A,-L))});window.addEventListener("scrollDown",()=>{e.isPlaying&&(t.velocityX=Math.min(t.velocityX+A,L))});window.addEventListener("sideClick",()=>{e.isPlaying||X(),w()});document.addEventListener("keydown",o=>{if(typeof PluginMessageHandler>"u")switch(o.key){case" ":o.preventDefault(),e.isPlaying||X(),w();break;case"ArrowLeft":e.isPlaying&&(t.velocityX=Math.max(t.velocityX-A,-L));break;case"ArrowRight":e.isPlaying&&(t.velocityX=Math.min(t.velocityX+A,L));break}});document.addEventListener("DOMContentLoaded",()=>{console.log("Bouncing Ball Game initialized!"),g=document.getElementById("gameCanvas"),a=g.getContext("2d"),g.width=f,g.height=B;try{const i=new URL("data:image/png;base64,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",import.meta.url).href;v=new Image,v.src=i,v.onload=()=>{F=!0}}catch(i){console.warn("Failed to load ball sprite",i)}const o=document.getElementById("settingsButton"),n=document.getElementById("settingsMenu"),r=document.getElementById("musicMuteToggle"),s=document.getElementById("sfxMuteToggle");o&&n&&(o.addEventListener("click",i=>{i.stopPropagation(),n.classList.toggle("hidden"),!n.classList.contains("hidden")?e.isPlaying&&(e.isPaused=!0):e.isPaused&&(e.isPaused=!1,E=performance.now())}),document.addEventListener("click",i=>{n.classList.contains("hidden")||!n.contains(i.target)&&i.target!==o&&(n.classList.add("hidden"),e.isPaused&&(e.isPaused=!1,E=performance.now()))}));try{const i=localStorage.getItem("bbg_musicMuted"),l=localStorage.getItem("bbg_sfxMuted");i!==null&&(e.musicMuted=i==="true"),l!==null&&(e.sfxMuted=l==="true");const c=localStorage.getItem("bbg_highScore");c!==null&&(e.highScore=parseInt(c,10)||0)}catch{}r&&(r.checked=e.musicMuted,r.addEventListener("change",()=>{e.musicMuted=r.checked,P(),_()})),s&&(s.checked=e.sfxMuted,s.addEventListener("change",()=>{e.sfxMuted=s.checked,P()})),K(),typeof PluginMessageHandler>"u"&&(window.addEventListener("keydown",i=>{i.code==="Space"&&(i.preventDefault(),window.dispatchEvent(new CustomEvent("sideClick")))}),["pointerdown","touchstart","click"].forEach(i=>{window.addEventListener(i,w,{once:!0})})),X(),w()});console.log("Bouncing Ball Game Ready!");console.log("Controls:");console.log("- Scroll wheel: Move ball left/right");console.log("- Side button: Restart game");function K(){if(!d)try{const o=new URL(""+new URL("banger1-D-KldX_V.mp3",import.meta.url).href,import.meta.url).href;d=new Audio(o),d.loop=!0,d.volume=.4,d.muted=!!e.musicMuted}catch(o){console.warn("Failed to initialize background music",o)}}function w(){if(d||K(),!d||Y||(Y=!0,e.musicMuted))return;const o=d.play();o&&typeof o.then=="function"&&o.catch(()=>{Y=!1})}function _(){d&&(d.muted=!!e.musicMuted,e.musicMuted?d.pause():(Y=!1,w()))}function P(){try{localStorage.setItem("bbg_musicMuted",String(!!e.musicMuted)),localStorage.setItem("bbg_sfxMuted",String(!!e.sfxMuted))}catch{}}
