(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();class tt{constructor(){this.sideButtonEnabled=!0,this.scrollWheelEnabled=!0,this.eventListeners=new Map}init(t={}){this.sideButtonEnabled=t.sideButtonEnabled??!0,this.scrollWheelEnabled=t.scrollWheelEnabled??!0,this.sideButtonEnabled&&this.setupSideButtonListener(),this.scrollWheelEnabled&&this.setupScrollWheelListener(),t.keyboardFallback!==!1&&this.setupKeyboardFallback()}setupSideButtonListener(){window.addEventListener("sideClick",t=>{this.sideButtonEnabled&&this.handleSideButtonClick(t)})}setupScrollWheelListener(){window.addEventListener("scrollUp",t=>{this.scrollWheelEnabled&&this.handleScrollWheel({direction:"up",event:t})}),window.addEventListener("scrollDown",t=>{this.scrollWheelEnabled&&this.handleScrollWheel({direction:"down",event:t})})}setupKeyboardFallback(){window.addEventListener("keydown",t=>{if(t.code==="Space"){t.preventDefault();const i=new CustomEvent("sideClick",{detail:{source:"keyboard"}});window.dispatchEvent(i)}})}handleSideButtonClick(t){(this.eventListeners.get("sideButton")||[]).forEach(s=>s(t))}handleScrollWheel(t){(this.eventListeners.get("scrollWheel")||[]).forEach(s=>s({direction:t.direction,event:t.event}))}on(t,i){this.eventListeners.has(t)||this.eventListeners.set(t,[]),this.eventListeners.get(t).push(i)}off(t,i){const s=this.eventListeners.get(t)||[],r=s.indexOf(i);r>-1&&s.splice(r,1)}}const Ne=new tt;class nt{constructor(){this.screenWidth=240}setupViewport(){let t=document.querySelector('meta[name="viewport"]');t||(t=document.createElement("meta"),t.name="viewport",document.head.appendChild(t)),t.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}}const ot=new nt;ot.setupViewport();Ne.init();const w=document.getElementById("glcanvas"),e=w.getContext("webgl2",{antialias:!0});e||console.error("WebGL2 not supported");const W=240,j=320;function Ce(o,t,i){const s=o.createShader(t);return o.shaderSource(s,i),o.compileShader(s),o.getShaderParameter(s,o.COMPILE_STATUS)?s:(console.error(o.getShaderInfoLog(s)||"Shader compile error"),o.deleteShader(s),null)}function Re(o,t,i){const s=Ce(o,o.VERTEX_SHADER,t),r=Ce(o,o.FRAGMENT_SHADER,i),n=o.createProgram();return o.attachShader(n,s),o.attachShader(n,r),o.linkProgram(n),o.getProgramParameter(n,o.LINK_STATUS)?n:(console.error(o.getProgramInfoLog(n)||"Program link error"),o.deleteProgram(n),null)}const st=`#version 300 es
precision highp float;
layout(location=0) in vec2 a_pos;       // unit quad verts [-0.5,0.5]
layout(location=1) in vec2 a_instPos;   // world center
layout(location=2) in vec2 a_instSize;  // world size
layout(location=3) in vec4 a_color;     // base color
uniform vec2 u_worldSize;
out vec4 v_color;
void main(){
  vec2 world = a_instPos + a_pos * a_instSize;
  vec2 ndc = (world / u_worldSize) * 2.0 - 1.0;
  ndc.y = -ndc.y; // flip Y to screen coords
  gl_Position = vec4(ndc, 0.0, 1.0);
  v_color = a_color;
}`,it=`#version 300 es
precision highp float;
in vec4 v_color;
out vec4 outColor;
void main(){ outColor = v_color; }`,Fe=Re(e,st,it);e.useProgram(Fe);const Ee=e.createTexture(),Xe=e.createFramebuffer(),ke=e.createTexture(),rt=e.createFramebuffer();let oe=0,se=0;function Ue(o,t,i){e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null)}function lt(){oe===w.width&&se===w.height||(oe=w.width,se=w.height,Ue(Ee,oe,se),e.bindFramebuffer(e.FRAMEBUFFER,Xe),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,Ee,0),Ue(ke,oe,se),e.bindFramebuffer(e.FRAMEBUFFER,rt),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,ke,0),e.bindFramebuffer(e.FRAMEBUFFER,null))}const Ye=`#version 300 es
precision highp float;
layout(location=0) in vec2 a_pos;
out vec2 v_uv;
void main(){
  v_uv = a_pos * 0.5 + 0.5;
  gl_Position = vec4(a_pos, 0.0, 1.0);
}`,ct=`#version 300 es
precision highp float;
in vec2 v_uv;
out vec4 outColor;
uniform sampler2D u_tex;
uniform vec2 u_dir;       // (1,0) or (0,1)
uniform float u_threshold; // >=0 to apply bright-pass; <0 to skip
void main(){
  vec2 texel = 1.0 / vec2(textureSize(u_tex, 0));
  float w[9];
  w[0]=0.05; w[1]=0.07; w[2]=0.1; w[3]=0.13; w[4]=0.2; w[5]=0.13; w[6]=0.1; w[7]=0.07; w[8]=0.05;
  vec3 sum = vec3(0.0);
  int k = 0;
  for (int i=-4;i<=4;i++){
    vec2 uv = v_uv + float(i) * texel * u_dir * 2.0; // widen radius
    vec3 s = texture(u_tex, uv).rgb;
    if (u_threshold >= 0.0) {
      float b = max(0.0, max(max(s.r, s.g), s.b) - u_threshold);
      s *= b;
    }
    sum += s * w[k++];
  }
  outColor = vec4(sum, 1.0);
}`,at=`#version 300 es
precision highp float;
in vec2 v_uv;
out vec4 outColor;
uniform sampler2D u_scene;
uniform float u_threshold;
uniform float u_bloom;
void main(){
  vec2 texel = 1.0 / vec2(textureSize(u_scene, 0));
  vec3 scene = texture(u_scene, v_uv).rgb;
  vec3 sum = vec3(0.0);
  float w[9];
  w[0]=0.05; w[1]=0.07; w[2]=0.1; w[3]=0.13; w[4]=0.2; w[5]=0.13; w[6]=0.1; w[7]=0.07; w[8]=0.05;
  int k = 0;
  for (int y=-4;y<=4;y++){
    for (int x=-4;x<=4;x++){
      vec2 uv = v_uv + vec2(float(x), float(y)) * texel * 1.5;
      vec3 s = texture(u_scene, uv).rgb;
      float b = max(0.0, max(max(s.r, s.g), s.b) - u_threshold);
      sum += s * b * w[int(abs(float(x)))];
    }
  }
  sum /= 9.0 * 9.0;
  vec3 outc = scene + sum * u_bloom;
  outColor = vec4(outc, 1.0);
}`,Be=Re(e,Ye,ct);e.getUniformLocation(Be,"u_tex");e.getUniformLocation(Be,"u_dir");e.getUniformLocation(Be,"u_threshold");const fe=Re(e,Ye,at),ht=e.getUniformLocation(fe,"u_scene"),ut=e.getUniformLocation(fe,"u_threshold"),ft=e.getUniformLocation(fe,"u_bloom"),ze=e.createVertexArray();e.bindVertexArray(ze);const dt=new Float32Array([-1,-1,1,-1,1,1,-1,-1,1,1,-1,1]),mt=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,mt);e.bufferData(e.ARRAY_BUFFER,dt,e.STATIC_DRAW);e.enableVertexAttribArray(0);e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0);const pt=new Float32Array([-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5]),Ge=e.createVertexArray();e.bindVertexArray(Ge);const xt=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,xt);e.bufferData(e.ARRAY_BUFFER,pt,e.STATIC_DRAW);e.enableVertexAttribArray(0);e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0);const Ve=e.createBuffer(),Ke=e.createBuffer(),$e=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,Ve);e.enableVertexAttribArray(1);e.vertexAttribPointer(1,2,e.FLOAT,!1,0,0);e.vertexAttribDivisor(1,1);e.bindBuffer(e.ARRAY_BUFFER,Ke);e.enableVertexAttribArray(2);e.vertexAttribPointer(2,2,e.FLOAT,!1,0,0);e.vertexAttribDivisor(2,1);e.bindBuffer(e.ARRAY_BUFFER,$e);e.enableVertexAttribArray(3);e.vertexAttribPointer(3,4,e.FLOAT,!1,0,0);e.vertexAttribDivisor(3,1);const vt=e.getUniformLocation(Fe,"u_worldSize");e.disable(e.DEPTH_TEST);e.clearColor(.02,.02,.03,1);function yt(){const o=Math.min(window.devicePixelRatio||1,2),t=Math.floor(w.clientWidth*o),i=Math.floor(w.clientHeight*o);(w.width!==t||w.height!==i)&&(w.width=t,w.height=i),e.viewport(0,0,w.width,w.height)}let Z=2654435769,J=608135816;function Me(o){Z=(o^2654435769)>>>0,J=o*1664525+1013904223>>>0}function de(){let o=(J+=1831565813)>>>0,t=(Z+=2246822507)>>>0;return o^=o>>>15,o=Math.imul(o,739982445),o^=o>>>12,o=Math.imul(o,695872825),o^=o>>>15,t^=t>>>15,t=Math.imul(t,739982445),t^=t>>>12,t=Math.imul(t,695872825),t^=t>>>15,((o^t)>>>0)/4294967295}const pe=50,xe=30,N=38,z=6,F=4;let E=W*.5,k=j-16,O=0;const bt=140,we=[],P=[];function gt(){return we.length>0?we.pop():{x:0,y:0,vx:0,vy:0}}function Et(o){we.push(o)}const Ae=[],H=[];let I=0,U=0,V=0,K=0;const wt=5,At=10,q=[];let te=[],ie=new Map;function ve(o,t){if(de()<.05){const i=_t();i.x=o,i.y=t,i.w=8,i.h=8,i.vy=40,i.type=1,H.push(i)}}function _t(){return Ae.length?Ae.pop():{x:0,y:0,w:8,h:8,vy:30,type:0}}function Ie(o){Ae.push(o)}const B=[];function Rt(o,t,i){let s=(o|0)*374761393^(t|0)*668265263^(i|0);return s=(s^s>>>13)>>>0,s=Math.imul(s,1274126177)>>>0,(s>>>0)/4294967295}function ye(o){return Math.floor(de()*o)}let ae=12345,ee=1,re=!1,S={bg:[.02,.02,.03],brick1:[.9,.4,.4],brick2:[.4,.9,.5],brick3:[.4,.6,.9],paddle:[1,1,1],ball:[1,1,.3]};function Ft(o){B.length=0;const t=8,i=10,s=W-t*2,r=j*.6,n=s/pe,l=r/xe,m=t,f=i,h=16,d=10,{mask:y,width:c,height:a}=Bt(h,d,o^666745);for(let u=0;u<xe;u++)for(let A=0;A<pe;A++){const M=m+A*n+n*.5,D=f+u*l+l*.5,g=Math.max(0,Math.min(c-1,Math.floor((A+.5)/pe*c))),v=Math.max(0,Math.min(a-1,Math.floor((u+.5)/xe*a))),b=y[v*c+g]===1;let x=1+(A+u+(o&7))%3;D>f+r*.8&&(x=1),B.push({x:M,y:D,w:n*.95,h:l*.9,hp:b?x:0,alive:b})}}function Bt(o,t,i){const s=o*2+1,r=t*2+1,n=new Uint8Array(s*r);for(let v=0;v<s*r;v++)n[v]=1;const l=Z,m=J;Me(i);const f=new Uint8Array(o*t),h=[];function d(v,p){return p*o+v}function y(v,p){n[(p*2+1)*s+(v*2+1)]=0}function c(v,p,b,x){n[(p+x+1)*s+(v+b+1)]=0}let a=ye(o),u=ye(t);for(f[d(a,u)]=1,y(a,u),h.push([a,u]);h.length;){const v=h[h.length-1];a=v[0],u=v[1];const p=[[1,0],[-1,0],[0,1],[0,-1]];for(let x=p.length-1;x>0;x--){const C=ye(x+1),L=p[x];p[x]=p[C],p[C]=L}let b=!1;for(let x=0;x<4;x++){const C=p[x][0],L=p[x][1],_=a+C,R=u+L;if(!(_<0||R<0||_>=o||R>=t)&&!f[d(_,R)]){f[d(_,R)]=1,y(_,R),c(a,u,_,R),h.push([_,R]),b=!0;break}}b||h.pop()}const A=0,M=0,D=o-1,g=t-1;return y(A,M),y(D,g),n[(M*2+1)*s+0]=0,n[(g*2+1)*s+(s-1)]=0,Z=l,J=m,{mask:n,width:s,height:r}}function Te(o,t,i=120,s=-Math.PI/4){const r=gt();r.x=o,r.y=t,r.vx=Math.cos(s)*i,r.vy=Math.sin(s)*i,P.push(r)}function Mt(o){for(let i=0;i<o&&P.length<5e3;i++){const s=-Math.PI*.75+de()*(Math.PI*.5);Te(E,k-16,110,s)}}let he=3,_e=!1;function Q(o,t){ee=o;const i=(ae^o*2654435769)>>>0;H.length=0,q.length=0,te.length=0,I=0,U=0,V=0,K=0,Me(i),S=Dt(i),Ft(i),P.length=0,Te(E,k-20,120,-Math.PI*.6),t&&(he=3,_e=!1)}class ${constructor(t,i,s,r,n=0,l=6,m=12){this.x=t,this.y=i,this.w=s,this.h=r,this.depth=n,this.maxDepth=l,this.cap=m,this.items=[],this.kids=null}insert(t){if(this.kids){this._insertIntoKids(t);return}this.items.push(t),this.items.length>this.cap&&this.depth<this.maxDepth&&this._split()}_split(){const t=this.w*.5,i=this.h*.5;this.kids=[new $(this.x,this.y,t,i,this.depth+1,this.maxDepth,this.cap),new $(this.x+t,this.y,t,i,this.depth+1,this.maxDepth,this.cap),new $(this.x,this.y+i,t,i,this.depth+1,this.maxDepth,this.cap),new $(this.x+t,this.y+i,t,i,this.depth+1,this.maxDepth,this.cap)];const s=this.items;this.items=[];for(let r=0;r<s.length;r++)this._insertIntoKids(s[r])}_insertIntoKids(t){for(let i=0;i<4;i++){const s=this.kids[i];t.rx1>s.x&&t.rx0<s.x+s.w&&t.ry1>s.y&&t.ry0<s.y+s.h&&s.insert(t)}}query(t,i,s,r,n){if(s<=this.x||t>=this.x+this.w||r<=this.y||i>=this.y+this.h)return n;for(let l=0;l<this.items.length;l++)n.push(this.items[l]);if(this.kids)for(let l=0;l<4;l++)this.kids[l].query(t,i,s,r,n);return n}}let ue=null;function Tt(){ue=new $(0,0,W,j);for(let o=0;o<B.length;o++){const t=B[o];t.alive&&ue.insert({rx0:t.x-t.w*.5,ry0:t.y-t.h*.5,rx1:t.x+t.w*.5,ry1:t.y+t.h*.5,ref:o})}}function G(o){qe&&(O=0),E+=O*o;const t=Math.exp(-6*o);O*=t;const i=N*.5;E<i&&(E=i,O=Math.abs(O)),E>W-i&&(E=W-i,O=-Math.abs(O)),Tt();for(let r=0;r<P.length;r++){const n=P[r];if(n.x+=n.vx*o,n.y+=n.vy*o,n.x<F*.5&&(n.x=F*.5,n.vx*=-1),n.x>W-F*.5&&(n.x=W-F*.5,n.vx*=-1),n.y<F*.5&&(n.y=F*.5,n.vy*=-1),n.y>j+20){Et(n),P.splice(r,1),r--;continue}const l=E-N*.5,m=E+N*.5,f=k-z*.5,h=k+z*.5;if(n.x+F*.5>l&&n.x-F*.5<m&&n.y+F*.5>f&&n.y-F*.5<h){n.y=f-F*.5,n.vy=-Math.abs(n.vy);const d=(n.x-E)/(N*.5);n.vx=d*120}}for(let r=0;r<P.length;r++){const n=P[r],l=n.x-F*.5,m=n.x+F*.5,f=n.y-F*.5,h=n.y+F*.5,d=[];ue.query(l,f,m,h,d);for(let y=0;y<d.length;y++){const c=B[d[y].ref];if(!c||!c.alive)continue;const a=c.x-c.w*.5,u=c.x+c.w*.5,A=c.y-c.h*.5,M=c.y+c.h*.5;if(m>a&&l<u&&h>A&&f<M){const D=m-a,g=u-l,v=h-A,p=M-f,b=Math.min(D,g),x=Math.min(v,p);b<x?(n.vx*=-1,n.x+=(D<g?-b:b)*.5*Math.sign(n.vx||1)):(n.vy*=-1,n.y+=(v<p?-x:x)*.5*Math.sign(n.vy||1)),c.hp-=1,je+=10,c.hp<=0&&(c.alive=!1,ve(c.x,c.y));break}}}for(let r=0;r<H.length;r++){const n=H[r];if(n.y+=n.vy*o,n.y>j+10){Ie(n),H.splice(r,1),r--;continue}const l=E-N*.5,m=E+N*.5,f=k-z*.5,h=k+z*.5;if(n.x+n.w*.5>l&&n.x-n.w*.5<m&&n.y+n.h*.5>f&&n.y-n.h*.5<h){const d=de();d<.34?Mt(16):d<.67?(I=Math.min(32,I+1),V=wt):(U=Math.min(32,U+1),K=At),Ie(n),H.splice(r,1),r--;continue}}if(te.length=0,V>0){V=Math.max(0,V-o);const r=Math.min(1+Math.floor(I*.5),9),n=Math.min(.6,.15+I*.03);for(let l=0;l<r;l++){const f=((r>1?l/(r-1):.5)-.5)*n,h=Math.sin(f),d=-Math.cos(f),y=40,c=12;let a=E,u=k-z;for(let A=0;A<y;A++){const M=a-1,D=a+1,g=u-1,v=u+1,p=[];ue.query(M,g,D,v,p);for(let ne=0;ne<p.length;ne++){const T=B[p[ne].ref];if(!(!T||!T.alive)&&a>T.x-T.w*.5&&a<T.x+T.w*.5&&u>T.y-T.h*.5&&u<T.y+T.h*.5){const me=p[ne].ref,Pe=(ie.get(me)||0)+o;Pe>=.2?(T.hp-=1,T.hp<=0&&(T.alive=!1,ve(T.x,T.y)),ie.set(me,0)):ie.set(me,Pe)}}const b=a+h*c*.5,x=u+d*c*.5,C=2+I*.3,L=c,_=1,R=.2,Je=.6,Qe=Math.abs(d)>.5?C:L,et=Math.abs(d)>.5?L:C;if(te.push({x:b,y:x,w:Qe,h:et,r:_,g:R,b:Je,a:.9}),a+=h*c,u+=d*c,u<0)break}}}else I=0,ie.clear();if(K>0){K=Math.max(0,K-o);const r=Math.min(6,1+Math.floor(U*.5));if(G._missileCooldown||(G._missileCooldown=0),G._missileCooldown-=o,G._missileCooldown<=0){G._missileCooldown=1/r;const n=Math.min(1+Math.floor(U*.5),8);for(let l=0;l<n;l++){let m=-1,f=1e12;for(let h=0;h<B.length;h++){const d=B[h];if(!d.alive)continue;const y=d.x-E,c=d.y-k,a=y*y+c*c;a<f&&(f=a,m=h)}if(m>=0){const h=B[m];q.push({x:E,y:k-12,tx:h.x,ty:h.y,speed:280+U*30,alive:!0})}}}}else U=0;for(let r=0;r<q.length;r++){const n=q[r];if(!n.alive)continue;const l=n.tx-n.x,m=n.ty-n.y,f=Math.sqrt(l*l+m*m)||1,h=l/f*n.speed,d=m/f*n.speed;if(n.x+=h*o,n.y+=d*o,f<8){n.alive=!1;const y=18+U*2;for(let c=0;c<B.length;c++){const a=B[c];if(!a.alive)continue;const u=a.x-n.tx,A=a.y-n.ty,M=u*u+A*A;M<=y*y&&(a.hp-=M<36?3:1,a.hp<=0&&(a.alive=!1,ve(a.x,a.y)))}}}P.length===0&&!_e&&(he-=1,he>0?Te(E,k-20,120,-Math.PI*.5):(_e=!0,Y&&le&&ce?(le.textContent="Game Over",Y.style.display="flex",ce.style.display="inline-block",ce.onclick=()=>{Y.style.display="none",ce.style.display="none",ae=Math.random()*1e9|0,Q(1,!0)}):(ae=Math.random()*1e9|0,Q(1,!0))));let s=0;for(let r=0;r<B.length;r++)B[r].alive&&s++;s===0&&!re&&(re=!0,Y&&le?(le.textContent=`Level ${ee} cleared!`,Y.style.display="flex",setTimeout(()=>{Y.style.display="none",re=!1,Q(ee+1,!1)},1e3)):(re=!1,Q(ee+1,!1)))}const Le=[],De=[],Se=[];function X(o,t,i,s,r,n,l,m){Le.push(o,t),De.push(i,s),Se.push(r,n,l,m)}function Lt(){const o=new Float32Array(Le),t=new Float32Array(De),i=new Float32Array(Se);e.bindBuffer(e.ARRAY_BUFFER,Ve),e.bufferData(e.ARRAY_BUFFER,o,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,Ke),e.bufferData(e.ARRAY_BUFFER,t,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,$e),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.drawArraysInstanced(e.TRIANGLES,0,6,o.length/2)}function Dt(o){const t=Z,i=J;Me(o^3203338804);const s=.61803398875;let r=Rt(1,2,o)*360%360;function n(a,u,A){const M=(a%360+360)%360/360,D=Math.min(1,Math.max(0,u)),g=A,v=Math.floor(M*6),p=M*6-v,b=g*(1-D),x=g*(1-p*D),C=g*(1-(1-p)*D);let L,_,R;switch(v%6){case 0:L=g,_=C,R=b;break;case 1:L=x,_=g,R=b;break;case 2:L=b,_=g,R=C;break;case 3:L=b,_=x,R=g;break;case 4:L=C,_=b,R=g;break;case 5:L=g,_=b,R=x;break}return[L,_,R]}function l(){return r=(r+s*360)%360,r}const m=n(r,.08,.06),f=n(l(),.85,.75),h=n(l(),.95,.78),d=n(l(),.9,.82),y=n(l(),.1,.98),c=n(l(),.3,.98);return Z=t,J=i,{bg:m,brick1:f,brick2:h,brick3:d,paddle:y,ball:c}}const We=document.getElementById("hud"),St=document.getElementById("menu"),Y=document.getElementById("overlay"),be=document.getElementById("seed-input"),ge=document.getElementById("btn-start"),le=document.getElementById("overlay-text"),ce=document.getElementById("btn-restart");let qe=!0,Oe=!1,je=0;ge==null||ge.addEventListener("click",()=>{ae=parseInt((be==null?void 0:be.value)||"12345",10)||12345,Q(1,!0),qe=!1,St.style.display="none";const o=document.getElementById("glcanvas");o&&(o.style.visibility="visible"),Oe||(Oe=!0,requestAnimationFrame(Ze))});let He=performance.now();function Ze(o){yt(),lt();const t=Math.min(.05,Math.max(0,(o-He)*.001));He=o,G(t),e.bindFramebuffer(e.FRAMEBUFFER,Xe),e.clear(e.COLOR_BUFFER_BIT),e.clearColor(S.bg[0],S.bg[1],S.bg[2],1),e.useProgram(Fe),e.uniform2f(vt,W,j),e.bindVertexArray(Ge),Le.length=0,De.length=0,Se.length=0;for(let i=0;i<B.length;i++){const s=B[i];if(!s.alive)continue;const r=s.hp===1?S.brick1:s.hp===2?S.brick2:S.brick3;X(s.x,s.y,s.w,s.h,r[0],r[1],r[2],1)}X(E,k,N,z,S.paddle[0],S.paddle[1],S.paddle[2],1);for(let i=0;i<P.length;i++){const s=P[i];X(s.x,s.y,F,F,S.ball[0],S.ball[1],S.ball[2],1)}for(let i=0;i<H.length;i++){const s=H[i];X(s.x,s.y,s.w,s.h,.2,1,.6,1)}for(let i=0;i<te.length;i++){const s=te[i];X(s.x,s.y,s.w,s.h,s.r,s.g,s.b,s.a)}for(let i=0;i<q.length;i++){const s=q[i];s.alive&&X(s.x,s.y,8,14,1,.8,.2,1)}Lt(),e.bindFramebuffer(e.FRAMEBUFFER,null),e.useProgram(fe),e.bindVertexArray(ze),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,Ee),e.uniform1i(ht,0),e.uniform1f(ut,.3),e.uniform1f(ft,4),e.drawArrays(e.TRIANGLES,0,6),We&&(We.textContent=`Lvl ${ee}  Lives ${he}  Balls ${P.length}  Score ${je}  Laser ${I>0?I:0}(${V.toFixed(1)}s)  Missile ${U>0?U:0}(${K.toFixed(1)}s)`),requestAnimationFrame(Ze)}Ne.on("scrollWheel",({direction:o})=>{O+=(o==="up"?-1:1)*bt});window.addEventListener("mousemove",o=>{const t=w.getBoundingClientRect();E=(o.clientX-t.left)/Math.max(1,t.width)*W});function Pt(){w.style.width||(w.style.width="100vw"),w.style.height||(w.style.height="100vh"),w.style.display="block"}Pt();window.BB_DEBUG={getStats:()=>({paddleX:E,balls:P.length,bricksAlive:B.reduce((o,t)=>o+(t.alive?1:0),0)})};
