(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function i(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=i(o);fetch(o.href,r)}})();class E{constructor(){this.sideButtonEnabled=!0,this.scrollWheelEnabled=!0,this.eventListeners=new Map}init(e={}){this.sideButtonEnabled=e.sideButtonEnabled??!0,this.scrollWheelEnabled=e.scrollWheelEnabled??!0,this.sideButtonEnabled&&this.setupSideButtonListener(),this.scrollWheelEnabled&&this.setupScrollWheelListener(),e.keyboardFallback!==!1&&this.setupKeyboardFallback()}setupSideButtonListener(){window.addEventListener("sideClick",e=>{this.sideButtonEnabled&&this.handleSideButtonClick(e)})}setupScrollWheelListener(){window.addEventListener("scrollUp",e=>{this.scrollWheelEnabled&&this.handleScrollWheel({direction:"up",event:e})}),window.addEventListener("scrollDown",e=>{this.scrollWheelEnabled&&this.handleScrollWheel({direction:"down",event:e})})}setupKeyboardFallback(){window.addEventListener("keydown",e=>{if(e.code==="Space"){e.preventDefault();const i=new CustomEvent("sideClick",{detail:{source:"keyboard"}});window.dispatchEvent(i)}})}handleSideButtonClick(e){(this.eventListeners.get("sideButton")||[]).forEach(s=>s(e))}handleScrollWheel(e){(this.eventListeners.get("scrollWheel")||[]).forEach(s=>s({direction:e.direction,event:e.event}))}on(e,i){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(i)}off(e,i){const s=this.eventListeners.get(e)||[],o=s.indexOf(i);o>-1&&s.splice(o,1)}}const y=new E;class L{constructor(){this.screenWidth=240}setupViewport(){let e=document.querySelector('meta[name="viewport"]');e||(e=document.createElement("meta"),e.name="viewport",document.head.appendChild(e)),e.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}}const b=new L;b.setupViewport();y.init();const n=document.getElementById("pad"),l=document.createElement("canvas"),c=l.getContext("2d");n==null||n.appendChild(l);function g(){const t=window.devicePixelRatio||1,e=(n==null?void 0:n.clientWidth)||window.innerWidth,i=(n==null?void 0:n.clientHeight)||window.innerHeight;l.style.width=e+"px",l.style.height=i+"px",l.width=Math.floor(e*t),l.height=Math.floor(i*t),c.setTransform(t,0,0,t,0,0),c.lineCap="round",c.lineJoin="round",c.strokeStyle="#FE5F00",c.lineWidth=4}window.addEventListener("resize",g);g();let h=!1,w=0,v=0;function u(t,e){const i=l.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}function m(t,e,i=.5,s=4,o=4){h=!0,w=t,v=e;const r=2+i*6;c.lineWidth=Math.max(r,Math.max(s,o)*.2)}function a(t,e){h&&(c.beginPath(),c.moveTo(w,v),c.lineTo(t,e),c.stroke(),w=t,v=e)}function d(){h=!1}function f(t,e=""){const i=[];if(t.width&&t.height&&i.push({type:t.pointerType||"touch",width:t.width,height:t.height,pressure:t.pressure??0}),t.touches&&t.touches.length)for(const s of t.touches){const o=s.radiusX??s.webkitRadiusX,r=s.radiusY??s.webkitRadiusY;o&&r&&i.push({type:"touch",width:o*2,height:r*2,force:s.force??s.webkitForce??void 0})}if(i.length){const s=i[0],o=window.devicePixelRatio||1;console.log(`[${e}] size ≈ ${s.width.toFixed(1)}×${s.height.toFixed(1)} CSS px (${(s.width*o).toFixed(1)}×${(s.height*o).toFixed(1)} device px)`,s)}}n==null||n.addEventListener("pointerdown",t=>{var e;if(t.pointerType==="touch"||t.pointerType==="pen"||t.pointerType==="mouse"){const{x:i,y:s}=u(t.clientX,t.clientY);m(i,s,t.pressure??.5,t.width??4,t.height??4),a(i,s),(e=n.setPointerCapture)==null||e.call(n,t.pointerId),f(t,"pointerdown")}});n==null||n.addEventListener("pointermove",t=>{if(!h)return;const{x:e,y:i}=u(t.clientX,t.clientY);a(e,i),f(t,"pointermove")});n==null||n.addEventListener("pointerup",()=>d());n==null||n.addEventListener("pointercancel",()=>d());n==null||n.addEventListener("pointerleave",()=>d());n==null||n.addEventListener("touchstart",t=>{const e=t.touches[0];if(!e)return;const{x:i,y:s}=u(e.clientX,e.clientY);m(i,s,e.force??.5,(e.radiusX??2)*2,(e.radiusY??2)*2),a(i,s),f(t,"touchstart")},{passive:!0});n==null||n.addEventListener("touchmove",t=>{const e=t.touches[0];if(!e)return;const{x:i,y:s}=u(e.clientX,e.clientY);a(i,s),f(t,"touchmove")},{passive:!0});n==null||n.addEventListener("touchend",()=>d(),{passive:!0});n==null||n.addEventListener("touchcancel",()=>d(),{passive:!0});console.log("Drawing App Ready!");
