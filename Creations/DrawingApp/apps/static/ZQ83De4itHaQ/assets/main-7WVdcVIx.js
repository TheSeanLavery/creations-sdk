(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();class x{constructor(){this.sideButtonEnabled=!0,this.scrollWheelEnabled=!0,this.eventListeners=new Map}init(e={}){this.sideButtonEnabled=e.sideButtonEnabled??!0,this.scrollWheelEnabled=e.scrollWheelEnabled??!0,this.sideButtonEnabled&&this.setupSideButtonListener(),this.scrollWheelEnabled&&this.setupScrollWheelListener(),e.keyboardFallback!==!1&&this.setupKeyboardFallback()}setupSideButtonListener(){window.addEventListener("sideClick",e=>{this.sideButtonEnabled&&this.handleSideButtonClick(e)})}setupScrollWheelListener(){window.addEventListener("scrollUp",e=>{this.scrollWheelEnabled&&this.handleScrollWheel({direction:"up",event:e})}),window.addEventListener("scrollDown",e=>{this.scrollWheelEnabled&&this.handleScrollWheel({direction:"down",event:e})})}setupKeyboardFallback(){window.addEventListener("keydown",e=>{if(e.code==="Space"){e.preventDefault();const o=new CustomEvent("sideClick",{detail:{source:"keyboard"}});window.dispatchEvent(o)}})}handleSideButtonClick(e){(this.eventListeners.get("sideButton")||[]).forEach(n=>n(e))}handleScrollWheel(e){(this.eventListeners.get("scrollWheel")||[]).forEach(n=>n({direction:e.direction,event:e.event}))}on(e,o){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(o)}off(e,o){const n=this.eventListeners.get(e)||[],s=n.indexOf(o);s>-1&&n.splice(s,1)}}const C=new x;class W{constructor(){this.screenWidth=240}setupViewport(){let e=document.querySelector('meta[name="viewport"]');e||(e=document.createElement("meta"),e.name="viewport",document.head.appendChild(e)),e.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}}const k=new W;k.setupViewport();C.init();const i=document.getElementById("pad"),h=document.createElement("canvas"),c=h.getContext("2d");i==null||i.appendChild(h);const d=document.createElement("div");d.id="hud";d.textContent="";i==null||i.appendChild(d);function L(){const t=window.devicePixelRatio||1,e=(i==null?void 0:i.clientWidth)||window.innerWidth,o=(i==null?void 0:i.clientHeight)||window.innerHeight;h.style.width=e+"px",h.style.height=o+"px",h.width=Math.floor(e*t),h.height=Math.floor(o*t),c.setTransform(t,0,0,t,0,0),c.lineCap="round",c.lineJoin="round",c.strokeStyle="#FE5F00",c.lineWidth=4}window.addEventListener("resize",L);L();let v=!1,g=0,y=0;function u(t,e){const o=h.getBoundingClientRect();return{x:t-o.left,y:e-o.top}}function S(t,e,o){return Math.min(o,Math.max(e,t))}function f(t,e){return Math.max(t||0,e||0)}function b(t){return S(2+t*.2,2,24)}function p(t){d&&(t&&t>0?(d.textContent=t.toFixed(1),d.style.display="block"):(d.textContent="",d.style.display="none"))}function E(t,e,o=4,n=4){v=!0,g=t,y=e;const s=f(o,n);c.lineWidth=b(s)}function a(t,e){v&&(c.beginPath(),c.moveTo(g,y),c.lineTo(t,e),c.stroke(),g=t,y=e)}function w(){v=!1,p(0)}function m(t,e=""){const o=[];if(t.width&&t.height&&o.push({type:t.pointerType||"touch",width:t.width,height:t.height,pressure:t.pressure??0}),t.touches&&t.touches.length)for(const n of t.touches){const s=n.radiusX??n.webkitRadiusX,r=n.radiusY??n.webkitRadiusY;s&&r&&o.push({type:"touch",width:s*2,height:r*2,force:n.force??n.webkitForce??void 0})}if(o.length){const n=o[0],s=window.devicePixelRatio||1;console.log(`[${e}] size ≈ ${n.width.toFixed(1)}×${n.height.toFixed(1)} CSS px (${(n.width*s).toFixed(1)}×${(n.height*s).toFixed(1)} device px)`,n)}}i==null||i.addEventListener("pointerdown",t=>{var e;if(t.pointerType==="touch"){const{x:o,y:n}=u(t.clientX,t.clientY);E(o,n,t.width??4,t.height??4);const s=f(t.width,t.height);p(s),a(o,n),(e=i.setPointerCapture)==null||e.call(i,t.pointerId),m(t,"pointerdown")}else if(t.pointerType==="mouse"){const{x:o,y:n}=u(t.clientX,t.clientY);E(o,n),a(o,n)}});i==null||i.addEventListener("pointermove",t=>{if(!v)return;const{x:e,y:o}=u(t.clientX,t.clientY);if(t.pointerType==="touch"){const n=f(t.width,t.height);c.lineWidth=b(n),p(n),m(t,"pointermove")}a(e,o)});i==null||i.addEventListener("pointerup",()=>w());i==null||i.addEventListener("pointercancel",()=>w());i==null||i.addEventListener("pointerleave",()=>w());i==null||i.addEventListener("touchstart",t=>{const e=t.touches[0];if(!e)return;const{x:o,y:n}=u(e.clientX,e.clientY),s=e.radiusX??e.webkitRadiusX??2,r=e.radiusY??e.webkitRadiusY??2,l=f(s*2,r*2);E(o,n,s*2,r*2),p(l),a(o,n),m(t,"touchstart")},{passive:!0});i==null||i.addEventListener("touchmove",t=>{const e=t.touches[0];if(!e)return;const{x:o,y:n}=u(e.clientX,e.clientY),s=e.radiusX??e.webkitRadiusX??2,r=e.radiusY??e.webkitRadiusY??2,l=f(s*2,r*2);c.lineWidth=b(l),p(l),a(o,n),m(t,"touchmove")},{passive:!0});i==null||i.addEventListener("touchend",()=>w(),{passive:!0});i==null||i.addEventListener("touchcancel",()=>w(),{passive:!0});console.log("Drawing App Ready!");
